apiVersion: metal.sidero.dev/v1alpha1
kind: Server
metadata:
  labels:
    worker-node: "true"
  name: 4c4c4544-0058-3910-805a-b6c04f355931
  namespace: default
spec:
  bmc:
    endpoint: 192.168.1.120
    userFrom:
      secretKeyRef:
        name: ipmi-credentials
        key: username
    passFrom:
      secretKeyRef:
        name: ipmi-credentials
        key: password
  configPatches:
    - op: replace
      path: /machine/install/disk
      value: /dev/sda
#mayastor config patches
    - op: add
      path: /machine/sysctls
    - op: replace
      path: /machine/sysctls
      value:
        vm.nr_hugepages: "1024"
    - op: add
      path: /machine/kubelet
    - op: replace
      path: /machine/kubelet
      value:
        extraArgs:
          node-labels: metal.sidero.dev/uuid=4c4c4544-0058-3910-805a-b6c04f355931,openebs.io/engine=mayastor
        extraMounts:
        - destination: /var/local
          type: bind
          source: /var/local
          options:
          - rbind
          - rshared
          - rw
  environmentRef:
    namespace: default
    name: default-amd64
  accepted: true
  cpu:
    manufacturer: Intel(R) Corporation
    version: NotSupport
  hostname: 192.168.1.224
  system:
    family: Unknown
    manufacturer: Dell Inc.
    productName: PowerEdge R210 II
    serialNumber: Unknown
    skuNumber: Unknown
    version: 6X9Z5Y1
