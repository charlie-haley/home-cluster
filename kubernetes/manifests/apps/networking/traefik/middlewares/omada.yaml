---
# yaml-language-server: $schema=https://raw.githubusercontent.com/datreeio/CRDs-catalog/main/traefik.io/middleware_v1alpha1.json
apiVersion: traefik.containo.us/v1alpha1
kind: Middleware
metadata:
  name: omada-headers
  namespace: networking
spec:
  headers:
    customRequestHeaders:
      Host: omada.${SECRET_DOMAIN}
    customResponseHeaders:
      Host: omada.${SECRET_DOMAIN}
---
# yaml-language-server: $schema=https://raw.githubusercontent.com/datreeio/CRDs-catalog/main/traefik.io/middleware_v1alpha1.json
apiVersion: traefik.containo.us/v1alpha1
kind: Middleware
metadata:
  name: omada-redirect
  namespace: networking
spec:
  redirectRegex:
    regex: https://([/]+)/?$
    replacement: https://$1/login
---
# yaml-language-server: $schema=https://raw.githubusercontent.com/datreeio/CRDs-catalog/main/traefik.io/middleware_v1alpha1.json
apiVersion: traefik.containo.us/v1alpha1
kind: Middleware
metadata:
  name: omada
  namespace: networking
spec:
  chain:
    middlewares:
      - name: omada-headers
      - name: omada-redirect
